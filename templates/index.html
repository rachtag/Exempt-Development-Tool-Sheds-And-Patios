<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exempt Development Assessment Tool for Sheds and Patios</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <div class="section">
    <h1>Exempt Development Assessment - Sheds and Patios</h1>
    <h4>Check if your shed or patio in Albury City qualifies as exempt development and can be built without council approval.</h4>
  </div>
 <!-- Address section -->
 <div class="section">
  <p>Please ensure your property is within Albury City before continuing.</p>
   <label for="address">Enter the property address:</label>
   <div class="address-container">
     <input type="text" id="address" placeholder="553 Kiewa St, Albury NSW 2640">
     <div id="results"></div>
   </div>
  </div>
  <!-- Development type -->
  <div class="section">
    <label for="development">Please select the type of structure you are planning to build:</label>
    <select id="development">
      <option value="">-- Select --</option>
      <option value="shed">Shed</option>
      <option value="patio">Patio</option>
    </select>
  </div>

  <!-- Common fields -->
  <div class="section">
    <p>If you are unsure about your property’s zoning, heritage status, or foreshore location, you can check it on the <a href="https://www.planningportal.nsw.gov.au/" target="_blank">NSW Planning Portal</a>.</p>
    <label for="zoning">Which zoning applies to your property?</label>
    <select id="zoning">
      <option value="">-- Select --</option>
      <option>R1</option><option>R2</option><option>R3</option><option>R4</option><option>R5</option>
      <option>RU1</option><option>RU2</option><option>RU3</option><option>RU4</option><option>RU6</option>
    </select>

    <label>Is the property a heritage item?
      <select id="heritage"><option>no</option><option>yes</option></select>
    </label>

    <label>Is the property in a foreshore area?
      <select id="foreshore"><option>no</option><option>yes</option></select>
    </label>

    <!-- Only used for sheds -->
    <label id="sensitive-area-label" class="hidden">Is the property in an environmentally sensitive area?
      <select id="sensitive_area"><option>no</option><option>yes</option></select>
    </label>
  </div>

  <!-- Shed fields -->
  <div id="shed-fields" class="section hidden">
    <h2>Shed Details</h2>
    <label>Planned shed area (in square metres, m²): <input type="number" id="area"></label>
    <label>Planned shed height (in metres, m): <input type="number" step="0.1" id="height"></label>
    <label>Distance from the property boundary (in millimetres, mm): <input type="number" id="boundary_distance"></label>
    <label>Will the shed be located behind the building line?
      <select id="building_line"><option>yes</option><option>no</option></select>
    </label>
    <label>Is the shed a shipping container?
      <select id="shipping_container"><option>no</option><option>yes</option></select>
    </label>
    <label>Will the roofwater be disposed of into an existing stormwater drainage system?
      <select id="stormwater"><option>yes</option><option>no</option></select>
    </label>
    <label>Does the shed use metal components?
      <select id="metal"><option>no</option><option>yes</option></select>
    </label>
    <label>If metal, are the components low-reflective or factory pre-coloured?
      <select id="reflective"><option>yes</option><option>no</option></select>
    </label>
    <label>Is the property on bushfire prone land?
      <select id="bushfire"><option>no</option><option>yes</option></select>
    </label>
    <label>What will be the distance from the dwelling on the lot (in metres, m)?<input type="number" id="distance_dwelling"></label>
    <label>Will the shed be constructed of non-combustible materials?
      <select id="non_combustible"><option>no</option><option>yes</option></select>
    </label>
    <label>Will the shed be adjacent to an existing building?
      <select id="adjacent_building"><option>no</option><option>yes</option></select>
    </label>
    <label>If adjacent, will the shed interfere with entry/exit or fire safety measures of an adjacent building?
      <select id="interfere"><option>no</option><option>yes</option></select>
    </label>
    <label>Is the shed planned to be habitable?
      <select id="habitable"><option>no</option><option>yes</option></select>
    </label>
    <label>Will the shed be within 1 metre of a registered easement?
      <select id="easement"><option>no</option><option>yes</option></select>
    </label>
    <label>Will the shed have water or sewer connections?
      <select id="services"><option>no</option><option>yes</option></select>
    </label>
    <label>Are there already two of the following on the lot: cabanas, cubby houses, ferneries, garden sheds, gazebos, greenhouses?
      <select id="existing_structures"><option>no</option><option>yes</option></select>
    </label>
  </div>

  <!-- Patio fields -->
  <div id="patio-fields" class="section hidden">
    <h2>Patio Details</h2>
    <label>Will this be a new development or are you replacing an existing structure?
      <select id="structure_type"><option>new</option><option>replacement</option></select>
    </label>
    <label>What is the height of the existing structure from ground level (in metres, m): <input type="number" step="0.1" id="height_existing"></label>
    <label>Will the new structure use equivalent or better quality materials?
      <select id="material_quality"><option>yes</option><option>no</option></select>
    </label>
    <label>Will the new structure be the same height and size as the existing?
      <select id="same_size"><option>yes</option><option>no</option></select>
    </label>
    <label>Planned patio area (in square metres, m²): <input type="number" id="area"></label>
    <label>What is the property lot size (in square metres, m²): <input type="number" id="land_size"></label>
    <label>>What is the total area of the planned + existing structures on the site (in square metres, m²): <input type="number" id="total_structures_area"></label>
    <label>Will any wall exceed 1.4 metres in height?
      <select id="wall_height"><option>no</option><option>yes</option></select>
    </label>
    <label>Will the patio be located behind the building line?
      <select id="behind_building_line"><option>yes</option><option>no</option></select>
    </label>
    <label>Distance from the property boundary (in millimetres, mm): <input type="number" id="boundary_distance"></label>
    <label>Does the patio use metal components?
      <select id="metal"><option>no</option><option>yes</option></select>
    </label>
    <label>If metal, are the components low-reflective or factory pre-coloured?
      <select id="reflective"><option>yes</option><option>no</option></select>
    </label>
    <label>What will be the floor height from ground level (in millimetres, mm)? <input type="number" id="floor_height"></label>
    <label>Will the structure have a roof?
      <select id="roof"><option>yes</option><option>no</option></select>
    </label>
    <label>What will be the roof overhang (in millimetres, mm)? <input type="number" id="overhang"></label>
    <label>Does the roof attach to the dwelling?
      <select id="attached"><option>yes</option><option>no</option></select>
    </label>
    <label>Does the roof extend above the gutter line?
      <select id="above_gutter"><option>no</option><option>yes</option></select>
    </label>
    <label>What will be the roof height (in metres, m)? <input type="number" step="0.1" id="roof_height"></label>
    <label>Will the roof be connected to the fascia?
      <select id="fascia_connection"><option>no</option><option>yes</option></select>
    </label>
    <label>If connected, is this as per engineer specs?
      <select id="engineer_spec"><option>yes</option><option>no</option></select>
    </label>
    <label>Will the roofwater be disposed of into an existing stormwater drainage system?
      <select id="stormwater"><option>yes</option><option>no</option></select>
    </label>
    <label>>Will the structure interfere with existing drainage or flow paths?
      <select id="drainage"><option>no</option><option>yes</option></select>
    </label>
    <label>Is the property on bushfire prone land?
      <select id="bushfire"><option>no</option><option>yes</option></select>
    </label>
    <label>What will be the distance from the dwelling on the lot (in metres, m)? <input type="number" id="distance_dwelling"></label>
    <label>Will the patio be constructed of non-combustible materials?
      <select id="non_combustible"><option>yes</option><option>no</option></select>
    </label>
  </div>

  <!-- Submit -->
  <button id="submit">Submit</button>

  <!-- Result -->
  <div class="section">
    <h2>Result</h2>
    <pre id="result"></pre>
  </div>

<script>
const devSelect = document.getElementById("development");
const shedFields = document.getElementById("shed-fields");
const patioFields = document.getElementById("patio-fields");
const sensitiveLabel = document.getElementById("sensitive-area-label");

devSelect.addEventListener("change", () => {
  shedFields.classList.add("hidden");
  patioFields.classList.add("hidden");
  sensitiveLabel.classList.add("hidden");
  if (devSelect.value === "shed") {
    shedFields.classList.remove("hidden");
    sensitiveLabel.classList.remove("hidden");
  }
  if (devSelect.value === "patio") {
    patioFields.classList.remove("hidden");
  }
});

document.getElementById("submit").addEventListener("click", async () => {
  const dev = devSelect.value;
  if (!dev) { alert("Select development type"); return; }

  let payload = { development: dev, zoning: document.getElementById("zoning").value };

  payload["address"] = document.getElementById("address").value;
  payload["heritage"] = document.getElementById("heritage").value;
  payload["foreshore"] = document.getElementById("foreshore").value;
  if (dev === "shed") payload["sensitive_area"] = document.getElementById("sensitive_area").value;

  // Sheds
  if (dev === "shed") {
    payload["area"] = Number(document.getElementById("area").value);
    payload["height"] = Number(document.getElementById("height").value);
    payload["boundary_distance"] = Number(document.getElementById("boundary_distance").value);
    payload["building_line"] = document.getElementById("building_line").value;
    payload["shipping_container"] = document.getElementById("shipping_container").value;
    payload["stormwater"] = document.getElementById("stormwater").value;
    payload["metal"] = document.getElementById("metal").value;
    payload["reflective"] = document.getElementById("reflective").value;
    payload["bushfire"] = document.getElementById("bushfire").value;
    payload["distance_dwelling"] = Number(document.getElementById("distance_dwelling").value);
    payload["non_combustible"] = document.getElementById("non_combustible").value;
    payload["adjacent_building"] = document.getElementById("adjacent_building").value;
    payload["interfere"] = document.getElementById("interfere").value;
    payload["habitable"] = document.getElementById("habitable").value;
    payload["easement"] = document.getElementById("easement").value;
    payload["services"] = document.getElementById("services").value;
    payload["existing_structures"] = document.getElementById("existing_structures").value;
  }

  // Patios
  if (dev === "patio") {
    payload["structure_type"] = document.getElementById("structure_type").value;
    payload["height_existing"] = Number(document.getElementById("height_existing").value);
    payload["material_quality"] = document.getElementById("material_quality").value;
    payload["same_size"] = document.getElementById("same_size").value;
    payload["area"] = Number(document.getElementById("area").value);
    payload["land_size"] = Number(document.getElementById("land_size").value);
    payload["total_structures_area"] = Number(document.getElementById("total_structures_area").value);
    payload["wall_height"] = document.getElementById("wall_height").value;
    payload["behind_building_line"] = document.getElementById("behind_building_line").value;
    payload["boundary_distance"] = Number(document.getElementById("boundary_distance").value);
    payload["metal"] = document.getElementById("metal").value;
    payload["reflective"] = document.getElementById("reflective").value;
    payload["floor_height"] = Number(document.getElementById("floor_height").value);
    payload["roof"] = document.getElementById("roof").value;
    payload["overhang"] = Number(document.getElementById("overhang").value);
    payload["attached"] = document.getElementById("attached").value;
    payload["above_gutter"] = document.getElementById("above_gutter").value;
    payload["roof_height"] = Number(document.getElementById("roof_height").value);
    payload["fascia_connection"] = document.getElementById("fascia_connection").value;
    payload["engineer_spec"] = document.getElementById("engineer_spec").value;
    payload["stormwater"] = document.getElementById("stormwater").value;
    payload["drainage"] = document.getElementById("drainage").value;
    payload["bushfire"] = document.getElementById("bushfire").value;
    payload["distance_dwelling"] = Number(document.getElementById("distance_dwelling").value);
    payload["non_combustible"] = document.getElementById("non_combustible").value;
  }

  const res = await fetch("/get-assessment-result/", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });
  const text = await res.text();
  document.getElementById("result").textContent = text;
});
</script>
<script src="{{ url_for('static', filename='js/autocomplete.js') }}"></script> 
</body>
</html>